{"version":3,"file":"27.js","sources":["webpack:///./src/views/goods/list.vue?1610","webpack:///./src/views/goods/list.vue?facb","webpack:///./src/views/goods/list.vue?71ab","webpack:///./src/views/goods/list.vue?34ff","webpack:///./src/api/business/goods.js","webpack:///./src/views/goods/list.vue","webpack:///./src/views/goods/list.vue?b10e","webpack:///./src/views/goods/list.vue?08ed","webpack:///./src/views/goods/list.vue?4ac3"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { listGoods, deleteGoods } from '@/api/business/goods';\nimport BackToTop from '@/components/BackToTop';\nimport Pagination from '@/components/Pagination'; // Secondary package based on el-pagination\n\nexport default {\n  name: 'GoodsList',\n  components: { BackToTop: BackToTop, Pagination: Pagination },\n  data: function data() {\n    return {\n      list: [],\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 20,\n        goodsSn: undefined,\n        name: undefined,\n        sort: 'add_time',\n        order: 'desc'\n      },\n      goodsDetail: '',\n      detailDialogVisible: false,\n      downloadLoading: false\n    };\n  },\n  created: function created() {\n    this.getList();\n  },\n\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      listGoods(this.listQuery).then(function (response) {\n        _this.list = response.data.data.items;\n        _this.total = response.data.data.total;\n        _this.listLoading = false;\n      }).catch(function () {\n        _this.list = [];\n        _this.total = 0;\n        _this.listLoading = false;\n      });\n    },\n    handleFilter: function handleFilter() {\n      this.listQuery.page = 1;\n      this.getList();\n    },\n    handleCreate: function handleCreate() {\n      this.$router.push({ path: '/goods/create' });\n    },\n    handleUpdate: function handleUpdate(row) {\n      this.$router.push({ path: '/goods/edit', query: { id: row.id } });\n    },\n    showDetail: function showDetail(detail) {\n      this.goodsDetail = detail;\n      this.detailDialogVisible = true;\n    },\n    handleDelete: function handleDelete(row) {\n      var _this2 = this;\n\n      deleteGoods(row).then(function (response) {\n        _this2.$notify.success({\n          title: '成功',\n          message: '删除成功'\n        });\n        var index = _this2.list.indexOf(row);\n        _this2.list.splice(index, 1);\n      }).catch(function (response) {\n        _this2.$notify.error({\n          title: '失败',\n          message: response.data.errmsg\n        });\n      });\n    },\n    handleDownload: function handleDownload() {\n      var _this3 = this;\n\n      this.downloadLoading = true;\n      import('@/vendor/Export2Excel').then(function (excel) {\n        var tHeader = ['商品ID', '商品编号', '名称', '专柜价格', '当前价格', '是否新品', '是否热品', '是否在售', '首页主图', '宣传图片列表', '商品介绍', '详细介绍', '商品图片', '商品单位', '关键字', '类目ID', '品牌商ID'];\n        var filterVal = ['id', 'goodsSn', 'name', 'counterPrice', 'retailPrice', 'isNew', 'isHot', 'isOnSale', 'listPicUrl', 'gallery', 'brief', 'detail', 'picUrl', 'goodsUnit', 'keywords', 'categoryId', 'brandId'];\n        excel.export_json_to_excel2(tHeader, _this3.list, filterVal, '商品信息');\n        _this3.downloadLoading = false;\n      });\n    }\n  }\n};","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.el-dialog {\\n    width: 60%;\\n}\\n.table-expand {\\n    font-size: 0;\\n}\\n.table-expand label {\\n    width: 100px;\\n    color: #99a9bf;\\n}\\n.table-expand .el-form-item {\\n    margin-right: 0;\\n    margin-bottom: 0;\\n}\\n.gallery {\\n    width: 80px;\\n    margin-right: 10px;\\n}\\n\", \"\"]);\n\n// exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-input',{staticClass:\"filter-item\",staticStyle:{\"width\":\"200px\"},attrs:{\"clearable\":\"\",\"size\":\"mini\",\"placeholder\":\"请输入商品编号\"},model:{value:(_vm.listQuery.goodsSn),callback:function ($$v) {_vm.$set(_vm.listQuery, \"goodsSn\", $$v)},expression:\"listQuery.goodsSn\"}}),_vm._v(\" \"),_c('el-input',{staticClass:\"filter-item\",staticStyle:{\"width\":\"200px\"},attrs:{\"clearable\":\"\",\"size\":\"mini\",\"placeholder\":\"请输入商品名称\"},model:{value:(_vm.listQuery.name),callback:function ($$v) {_vm.$set(_vm.listQuery, \"name\", $$v)},expression:\"listQuery.name\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"filter-item\",attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(\"查找\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"filter-item\",attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.handleCreate}},[_vm._v(\"添加\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"filter-item\",attrs:{\"loading\":_vm.downloadLoading,\"size\":\"mini\",\"type\":\"warning\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.handleDownload}},[_vm._v(\"导出\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],attrs:{\"data\":_vm.list,\"size\":\"small\",\"element-loading-text\":\"正在查询中。。。\",\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"table-expand\",attrs:{\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"宣传画廊\"}},_vm._l((props.row.gallery),function(pic){return _c('img',{key:pic,staticClass:\"gallery\",attrs:{\"src\":pic}})})),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品介绍\"}},[_c('span',[_vm._v(_vm._s(props.row.brief))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品单位\"}},[_c('span',[_vm._v(_vm._s(props.row.unit))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"关键字\"}},[_c('span',[_vm._v(_vm._s(props.row.keywords))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"类目ID\"}},[_c('span',[_vm._v(_vm._s(props.row.categoryId))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"品牌商ID\"}},[_c('span',[_vm._v(_vm._s(props.row.brandId))])])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"min-width\":\"110\",\"label\":\"商品编号\",\"prop\":\"goodsSn\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"min-width\":\"200\",\"label\":\"名称\",\"prop\":\"name\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"property\":\"iconUrl\",\"label\":\"图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.picUrl,\"width\":\"40\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"property\":\"iconUrl\",\"label\":\"分享图\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.shareUrl,\"width\":\"40\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"详情\",\"prop\":\"detail\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dialog',{attrs:{\"visible\":_vm.detailDialogVisible,\"title\":\"商品详情\"},on:{\"update:visible\":function($event){_vm.detailDialogVisible=$event}}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.goodsDetail)}})]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showDetail(scope.row.detail)}}},[_vm._v(\"查看\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"专柜价格\",\"prop\":\"counterPrice\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"当前价格\",\"prop\":\"retailPrice\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"是否新品\",\"prop\":\"isNew\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.isNew ? 'success' : 'error'}},[_vm._v(_vm._s(scope.row.isNew ? '新品' : '非新品'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"是否热品\",\"prop\":\"isHot\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.isHot ? 'success' : 'error'}},[_vm._v(_vm._s(scope.row.isHot ? '热品' : '非热品'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"150\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleUpdate(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total>0),expression:\"total>0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.listQuery.page,\"limit\":_vm.listQuery.limit},on:{\"update:page\":function($event){_vm.$set(_vm.listQuery, \"page\", $event)},\"update:limit\":function($event){_vm.$set(_vm.listQuery, \"limit\", $event)},\"pagination\":_vm.getList}}),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"placement\":\"top\",\"content\":\"返回顶部\"}},[_c('back-to-top',{attrs:{\"visibility-height\":100}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--7-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ff118d6a\", content, true, {});","import request from '@/utils/request';\n\nexport function listGoods(query) {\n  return request({\n    url: '/goods/list',\n    method: 'get',\n    params: query\n  });\n}\n\nexport function deleteGoods(data) {\n  return request({\n    url: '/goods/delete',\n    method: 'post',\n    data: data\n  });\n}\n\nexport function publishGoods(data) {\n  return request({\n    url: '/goods/create',\n    method: 'post',\n    data: data\n  });\n}\n\nexport function detailGoods(id) {\n  return request({\n    url: '/goods/detail',\n    method: 'get',\n    params: { id: id }\n  });\n}\n\nexport function editGoods(data) {\n  return request({\n    url: '/goods/update',\n    method: 'post',\n    data: data\n  });\n}\n\nexport function listCatAndBrand() {\n  return request({\n    url: '/goods/catAndBrand',\n    method: 'get'\n  });\n}","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=4f20a985&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"list.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/index.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--7-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/index.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--7-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=template&id=4f20a985&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpBA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}